(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var Mt,I,xe,Y,jt,Fe,zt,ct={},Te=[],un=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ct=Array.isArray;function Z(n,t){for(var e in t)n[e]=t[e];return n}function Pe(n){var t=n.parentNode;t&&t.removeChild(n)}function At(n,t,e){var i,s,o,r={};for(o in t)o=="key"?i=t[o]:o=="ref"?s=t[o]:r[o]=t[o];if(arguments.length>2&&(r.children=arguments.length>3?Mt.call(arguments,2):e),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)r[o]===void 0&&(r[o]=n.defaultProps[o]);return gt(n,r,i,s,null)}function gt(n,t,e,i,s){var o={type:n,props:t,key:e,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++xe,__i:-1,__u:0};return s==null&&I.vnode!=null&&I.vnode(o),o}function tt(n){return n.children}function V(n,t){this.props=n,this.context=t}function ht(n,t){if(t==null)return n.__?ht(n.__,n.__i+1):null;for(var e;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null)return e.__e;return typeof n.type=="function"?ht(n):null}function Ee(n){var t,e;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,t=0;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null){n.__e=n.__c.base=e.__e;break}return Ee(n)}}function Vt(n){(!n.__d&&(n.__d=!0)&&Y.push(n)&&!St.__r++||jt!==I.debounceRendering)&&((jt=I.debounceRendering)||Fe)(St)}function St(){var n,t,e,i,s,o,r,l,h;for(Y.sort(zt);n=Y.shift();)n.__d&&(t=Y.length,i=void 0,o=(s=(e=n).__v).__e,l=[],h=[],(r=e.__P)&&((i=Z({},s)).__v=s.__v+1,I.vnode&&I.vnode(i),Rt(r,i,s,e.__n,r.ownerSVGElement!==void 0,32&s.__u?[o]:null,l,o??ht(s),!!(32&s.__u),h),i.__v=s.__v,i.__.__k[i.__i]=i,Ue(l,i,h),i.__e!=o&&Ee(i)),Y.length>t&&Y.sort(zt));St.__r=0}function ze(n,t,e,i,s,o,r,l,h,u,_){var a,k,f,w,E,v=i&&i.__k||Te,m=t.length;for(e.__d=h,cn(e,t,v),h=e.__d,a=0;a<m;a++)(f=e.__k[a])!=null&&typeof f!="boolean"&&typeof f!="function"&&(k=f.__i===-1?ct:v[f.__i]||ct,f.__i=a,Rt(n,f,k,s,o,r,l,h,u,_),w=f.__e,f.ref&&k.ref!=f.ref&&(k.ref&&Dt(k.ref,null,f),_.push(f.ref,f.__c||w,f)),E==null&&w!=null&&(E=w),65536&f.__u||k.__k===f.__k?h=Ae(f,h,n):typeof f.type=="function"&&f.__d!==void 0?h=f.__d:w&&(h=w.nextSibling),f.__d=void 0,f.__u&=-196609);e.__d=h,e.__e=E}function cn(n,t,e){var i,s,o,r,l,h=t.length,u=e.length,_=u,a=0;for(n.__k=[],i=0;i<h;i++)r=i+a,(s=n.__k[i]=(s=t[i])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?gt(null,s,null,null,null):Ct(s)?gt(tt,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?gt(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=n,s.__b=n.__b+1,l=dn(s,e,r,_),s.__i=l,o=null,l!==-1&&(_--,(o=e[l])&&(o.__u|=131072)),o==null||o.__v===null?(l==-1&&a--,typeof s.type!="function"&&(s.__u|=65536)):l!==r&&(l===r+1?a++:l>r?_>h-r?a+=l-r:a--:l<r?l==r-1&&(a=l-r):a=0,l!==i+a&&(s.__u|=65536))):(o=e[r])&&o.key==null&&o.__e&&!(131072&o.__u)&&(o.__e==n.__d&&(n.__d=ht(o)),Ut(o,o,!1),e[r]=null,_--);if(_)for(i=0;i<u;i++)(o=e[i])!=null&&!(131072&o.__u)&&(o.__e==n.__d&&(n.__d=ht(o)),Ut(o,o))}function Ae(n,t,e){var i,s;if(typeof n.type=="function"){for(i=n.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=n,t=Ae(i[s],t,e));return t}n.__e!=t&&(e.insertBefore(n.__e,t||null),t=n.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function yt(n,t){return t=t||[],n==null||typeof n=="boolean"||(Ct(n)?n.some(function(e){yt(e,t)}):t.push(n)),t}function dn(n,t,e,i){var s=n.key,o=n.type,r=e-1,l=e+1,h=t[e];if(h===null||h&&s==h.key&&o===h.type&&!(131072&h.__u))return e;if(i>(h!=null&&!(131072&h.__u)?1:0))for(;r>=0||l<t.length;){if(r>=0){if((h=t[r])&&!(131072&h.__u)&&s==h.key&&o===h.type)return r;r--}if(l<t.length){if((h=t[l])&&!(131072&h.__u)&&s==h.key&&o===h.type)return l;l++}}return-1}function Zt(n,t,e){t[0]==="-"?n.setProperty(t,e??""):n[t]=e==null?"":typeof e!="number"||un.test(t)?e:e+"px"}function _t(n,t,e,i,s){var o;t:if(t==="style")if(typeof e=="string")n.style.cssText=e;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(t in i)e&&t in e||Zt(n.style,t,"");if(e)for(t in e)i&&e[t]===i[t]||Zt(n.style,t,e[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in n?t.toLowerCase().slice(2):t.slice(2),n.l||(n.l={}),n.l[t+o]=e,e?i?e.u=i.u:(e.u=Date.now(),n.addEventListener(t,o?Yt:Gt,o)):n.removeEventListener(t,o?Yt:Gt,o);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in n)try{n[t]=e??"";break t}catch{}typeof e=="function"||(e==null||e===!1&&t[4]!=="-"?n.removeAttribute(t):n.setAttribute(t,e))}}function Gt(n){if(this.l){var t=this.l[n.type+!1];if(n.t){if(n.t<=t.u)return}else n.t=Date.now();return t(I.event?I.event(n):n)}}function Yt(n){if(this.l)return this.l[n.type+!0](I.event?I.event(n):n)}function Rt(n,t,e,i,s,o,r,l,h,u){var _,a,k,f,w,E,v,m,c,C,x,A,H,p,b,S=t.type;if(t.constructor!==void 0)return null;128&e.__u&&(h=!!(32&e.__u),o=[l=t.__e=e.__e]),(_=I.__b)&&_(t);t:if(typeof S=="function")try{if(m=t.props,c=(_=S.contextType)&&i[_.__c],C=_?c?c.props.value:_.__:i,e.__c?v=(a=t.__c=e.__c).__=a.__E:("prototype"in S&&S.prototype.render?t.__c=a=new S(m,C):(t.__c=a=new V(m,C),a.constructor=S,a.render=_n),c&&c.sub(a),a.props=m,a.state||(a.state={}),a.context=C,a.__n=i,k=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),S.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=Z({},a.__s)),Z(a.__s,S.getDerivedStateFromProps(m,a.__s))),f=a.props,w=a.state,a.__v=t,k)S.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(S.getDerivedStateFromProps==null&&m!==f&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(m,C),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(m,a.__s,C)===!1||t.__v===e.__v)){for(t.__v!==e.__v&&(a.props=m,a.state=a.__s,a.__d=!1),t.__e=e.__e,t.__k=e.__k,t.__k.forEach(function(U){U&&(U.__=t)}),x=0;x<a._sb.length;x++)a.__h.push(a._sb[x]);a._sb=[],a.__h.length&&r.push(a);break t}a.componentWillUpdate!=null&&a.componentWillUpdate(m,a.__s,C),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(f,w,E)})}if(a.context=C,a.props=m,a.__P=n,a.__e=!1,A=I.__r,H=0,"prototype"in S&&S.prototype.render){for(a.state=a.__s,a.__d=!1,A&&A(t),_=a.render(a.props,a.state,a.context),p=0;p<a._sb.length;p++)a.__h.push(a._sb[p]);a._sb=[]}else do a.__d=!1,A&&A(t),_=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++H<25);a.state=a.__s,a.getChildContext!=null&&(i=Z(Z({},i),a.getChildContext())),k||a.getSnapshotBeforeUpdate==null||(E=a.getSnapshotBeforeUpdate(f,w)),ze(n,Ct(b=_!=null&&_.type===tt&&_.key==null?_.props.children:_)?b:[b],t,e,i,s,o,r,l,h,u),a.base=t.__e,t.__u&=-161,a.__h.length&&r.push(a),v&&(a.__E=a.__=null)}catch(U){t.__v=null,h||o!=null?(t.__e=l,t.__u|=h?160:32,o[o.indexOf(l)]=null):(t.__e=e.__e,t.__k=e.__k),I.__e(U,t,e)}else o==null&&t.__v===e.__v?(t.__k=e.__k,t.__e=e.__e):t.__e=fn(e.__e,t,e,i,s,o,r,h,u);(_=I.diffed)&&_(t)}function Ue(n,t,e){t.__d=void 0;for(var i=0;i<e.length;i++)Dt(e[i],e[++i],e[++i]);I.__c&&I.__c(t,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){I.__e(o,s.__v)}})}function fn(n,t,e,i,s,o,r,l,h){var u,_,a,k,f,w,E,v=e.props,m=t.props,c=t.type;if(c==="svg"&&(s=!0),o!=null){for(u=0;u<o.length;u++)if((f=o[u])&&"setAttribute"in f==!!c&&(c?f.localName===c:f.nodeType===3)){n=f,o[u]=null;break}}if(n==null){if(c===null)return document.createTextNode(m);n=s?document.createElementNS("http://www.w3.org/2000/svg",c):document.createElement(c,m.is&&m),o=null,l=!1}if(c===null)v===m||l&&n.data===m||(n.data=m);else{if(o=o&&Mt.call(n.childNodes),v=e.props||ct,!l&&o!=null)for(v={},u=0;u<n.attributes.length;u++)v[(f=n.attributes[u]).name]=f.value;for(u in v)f=v[u],u=="children"||(u=="dangerouslySetInnerHTML"?a=f:u==="key"||u in m||_t(n,u,null,f,s));for(u in m)f=m[u],u=="children"?k=f:u=="dangerouslySetInnerHTML"?_=f:u=="value"?w=f:u=="checked"?E=f:u==="key"||l&&typeof f!="function"||v[u]===f||_t(n,u,f,v[u],s);if(_)l||a&&(_.__html===a.__html||_.__html===n.innerHTML)||(n.innerHTML=_.__html),t.__k=[];else if(a&&(n.innerHTML=""),ze(n,Ct(k)?k:[k],t,e,i,s&&c!=="foreignObject",o,r,o?o[0]:e.__k&&ht(e,0),l,h),o!=null)for(u=o.length;u--;)o[u]!=null&&Pe(o[u]);l||(u="value",w!==void 0&&(w!==n[u]||c==="progress"&&!w||c==="option"&&w!==v[u])&&_t(n,u,w,v[u],!1),u="checked",E!==void 0&&E!==n[u]&&_t(n,u,E,v[u],!1))}return n}function Dt(n,t,e){try{typeof n=="function"?n(t):n.current=t}catch(i){I.__e(i,e)}}function Ut(n,t,e){var i,s;if(I.unmount&&I.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||Dt(i,null,t)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){I.__e(o,t)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&Ut(i[s],t,e||typeof n.type!="function");e||n.__e==null||Pe(n.__e),n.__=n.__e=n.__d=void 0}function _n(n,t,e){return this.constructor(n,e)}function pn(n,t,e){var i,s,o,r;I.__&&I.__(n,t),s=(i=typeof e=="function")?null:e&&e.__k||t.__k,o=[],r=[],Rt(t,n=(!i&&e||t).__k=At(tt,null,[n]),s||ct,ct,t.ownerSVGElement!==void 0,!i&&e?[e]:s?null:t.firstChild?Mt.call(t.childNodes):null,o,!i&&e?e:s?s.__e:t.firstChild,i,r),Ue(o,n,r)}Mt=Te.slice,I={__e:function(n,t,e,i){for(var s,o,r;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),r=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),r=s.__d),r)return s.__E=s}catch(l){n=l}throw n}},xe=0,V.prototype.setState=function(n,t){var e;e=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Z({},this.state),typeof n=="function"&&(n=n(Z({},e),this.props)),n&&Z(e,n),n!=null&&this.__v&&(t&&this._sb.push(t),Vt(this))},V.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Vt(this))},V.prototype.render=tt,Y=[],Fe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,zt=function(n,t){return n.__v.__b-t.__v.__b},St.__r=0;var dt,T,Lt,qt,wt=0,Be=[],It=[],P=I,Jt=P.__b,Qt=P.__r,Kt=P.diffed,te=P.__c,ee=P.unmount,ne=P.__;function Ot(n,t){P.__h&&P.__h(T,n,wt||t),wt=0;var e=T.__H||(T.__H={__:[],__h:[]});return n>=e.__.length&&e.__.push({__V:It}),e.__[n]}function R(n){return wt=1,mn(Oe,n)}function mn(n,t,e){var i=Ot(dt++,2);if(i.t=n,!i.__c&&(i.__=[e?e(t):Oe(void 0,t),function(l){var h=i.__N?i.__N[0]:i.__[0],u=i.t(h,l);h!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=T,!T.u)){var s=function(l,h,u){if(!i.__c.__H)return!0;var _=i.__c.__H.__.filter(function(k){return!!k.__c});if(_.every(function(k){return!k.__N}))return!o||o.call(this,l,h,u);var a=!1;return _.forEach(function(k){if(k.__N){var f=k.__[0];k.__=k.__N,k.__N=void 0,f!==k.__[0]&&(a=!0)}}),!(!a&&i.__c.props===l)&&(!o||o.call(this,l,h,u))};T.u=!0;var o=T.shouldComponentUpdate,r=T.componentWillUpdate;T.componentWillUpdate=function(l,h,u){if(this.__e){var _=o;o=void 0,s(l,h,u),o=_}r&&r.call(this,l,h,u)},T.shouldComponentUpdate=s}return i.__N||i.__}function Ne(n,t){var e=Ot(dt++,3);!P.__s&&De(e.__H,t)&&(e.__=n,e.i=t,T.__H.__h.push(e))}function xt(n){return wt=5,Re(function(){return{current:n}},[])}function Re(n,t){var e=Ot(dt++,7);return De(e.__H,t)?(e.__V=n(),e.i=t,e.__h=n,e.__V):e.__}function gn(){for(var n;n=Be.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(kt),n.__H.__h.forEach(Bt),n.__H.__h=[]}catch(t){n.__H.__h=[],P.__e(t,n.__v)}}P.__b=function(n){T=null,Jt&&Jt(n)},P.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),ne&&ne(n,t)},P.__r=function(n){Qt&&Qt(n),dt=0;var t=(T=n.__c).__H;t&&(Lt===T?(t.__h=[],T.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=It,e.__N=e.i=void 0})):(t.__h.forEach(kt),t.__h.forEach(Bt),t.__h=[],dt=0)),Lt=T},P.diffed=function(n){Kt&&Kt(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(Be.push(t)!==1&&qt===P.requestAnimationFrame||((qt=P.requestAnimationFrame)||In)(gn)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==It&&(e.__=e.__V),e.i=void 0,e.__V=It})),Lt=T=null},P.__c=function(n,t){t.some(function(e){try{e.__h.forEach(kt),e.__h=e.__h.filter(function(i){return!i.__||Bt(i)})}catch(i){t.some(function(s){s.__h&&(s.__h=[])}),t=[],P.__e(i,e.__v)}}),te&&te(n,t)},P.unmount=function(n){ee&&ee(n);var t,e=n.__c;e&&e.__H&&(e.__H.__.forEach(function(i){try{kt(i)}catch(s){t=s}}),e.__H=void 0,t&&P.__e(t,e.__v))};var ie=typeof requestAnimationFrame=="function";function In(n){var t,e=function(){clearTimeout(i),ie&&cancelAnimationFrame(t),setTimeout(n)},i=setTimeout(e,100);ie&&(t=requestAnimationFrame(e))}function kt(n){var t=T,e=n.__c;typeof e=="function"&&(n.__c=void 0,e()),T=t}function Bt(n){var t=T;n.__c=n.__(),T=t}function De(n,t){return!n||n.length!==t.length||t.some(function(e,i){return e!==n[i]})}function Oe(n,t){return typeof t=="function"?t(n):t}function kn(n,t){for(var e in t)n[e]=t[e];return n}function se(n,t){for(var e in n)if(e!=="__source"&&!(e in t))return!0;for(var i in t)if(i!=="__source"&&n[i]!==t[i])return!0;return!1}function oe(n,t){this.props=n,this.context=t}(oe.prototype=new V).isPureReactComponent=!0,oe.prototype.shouldComponentUpdate=function(n,t){return se(this.props,n)||se(this.state,t)};var re=I.__b;I.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),re&&re(n)};var Sn=I.__e;I.__e=function(n,t,e,i){if(n.then){for(var s,o=t;o=o.__;)if((s=o.__c)&&s.__c)return t.__e==null&&(t.__e=e.__e,t.__k=e.__k),s.__c(n,t)}Sn(n,t,e,i)};var le=I.unmount;function He(n,t,e){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),n.__c.__H=null),(n=kn({},n)).__c!=null&&(n.__c.__P===e&&(n.__c.__P=t),n.__c=null),n.__k=n.__k&&n.__k.map(function(i){return He(i,t,e)})),n}function $e(n,t,e){return n&&e&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(i){return $e(i,t,e)}),n.__c&&n.__c.__P===t&&(n.__e&&e.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=e)),n}function Ft(){this.__u=0,this.t=null,this.__b=null}function Xe(n){var t=n.__.__c;return t&&t.__a&&t.__a(n)}function pt(){this.u=null,this.o=null}I.unmount=function(n){var t=n.__c;t&&t.__R&&t.__R(),t&&32&n.__u&&(n.type=null),le&&le(n)},(Ft.prototype=new V).__c=function(n,t){var e=t.__c,i=this;i.t==null&&(i.t=[]),i.t.push(e);var s=Xe(i.__v),o=!1,r=function(){o||(o=!0,e.__R=null,s?s(l):l())};e.__R=r;var l=function(){if(!--i.__u){if(i.state.__a){var h=i.state.__a;i.__v.__k[0]=$e(h,h.__c.__P,h.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.t.pop();)u.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),n.then(r,r)},Ft.prototype.componentWillUnmount=function(){this.t=[]},Ft.prototype.render=function(n,t){if(this.__b){if(this.__v.__k){var e=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=He(this.__b,e,i.__O=i.__P)}this.__b=null}var s=t.__a&&At(tt,null,n.fallback);return s&&(s.__u&=-33),[At(tt,null,t.__a?null:n.children),s]};var he=function(n,t,e){if(++e[1]===e[0]&&n.o.delete(t),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(e=n.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.u=e=e[2]}};(pt.prototype=new V).__a=function(n){var t=this,e=Xe(t.__v),i=t.o.get(n);return i[0]++,function(s){var o=function(){t.props.revealOrder?(i.push(s),he(t,n,i)):s()};e?e(o):o()}},pt.prototype.render=function(n){this.u=null,this.o=new Map;var t=yt(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&t.reverse();for(var e=t.length;e--;)this.o.set(t[e],this.u=[1,0,this.u]);return n.children},pt.prototype.componentDidUpdate=pt.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(t,e){he(n,e,t)})};var yn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,wn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,bn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Mn=/[A-Z0-9]/g,Cn=typeof document<"u",vn=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function We(n,t,e){return t.__k==null&&(t.textContent=""),pn(n,t),typeof e=="function"&&e(),n?n.__c:null}V.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(V.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(t){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:t})}})});var ae=I.event;function Ln(){}function xn(){return this.cancelBubble}function Fn(){return this.defaultPrevented}I.event=function(n){return ae&&(n=ae(n)),n.persist=Ln,n.isPropagationStopped=xn,n.isDefaultPrevented=Fn,n.nativeEvent=n};var Tn={enumerable:!1,configurable:!0,get:function(){return this.class}},ue=I.vnode;I.vnode=function(n){typeof n.type=="string"&&function(t){var e=t.props,i=t.type,s={};for(var o in e){var r=e[o];if(!(o==="value"&&"defaultValue"in e&&r==null||Cn&&o==="children"&&i==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in e&&e.value==null?o="value":o==="download"&&r===!0?r="":l==="translate"&&r==="no"?r=!1:l==="ondoubleclick"?o="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||vn(e.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":bn.test(o)?o=l:i.indexOf("-")===-1&&wn.test(o)?o=o.replace(Mn,"-$&").toLowerCase():r===null&&(r=void 0):l=o="oninput",l==="oninput"&&s[o=l]&&(o="oninputCapture"),s[o]=r}}i=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=yt(e.children).forEach(function(h){h.props.selected=s.value.indexOf(h.props.value)!=-1})),i=="select"&&s.defaultValue!=null&&(s.value=yt(e.children).forEach(function(h){h.props.selected=s.multiple?s.defaultValue.indexOf(h.props.value)!=-1:s.defaultValue==h.props.value})),e.class&&!e.className?(s.class=e.class,Object.defineProperty(s,"className",Tn)):(e.className&&!e.class||e.class&&e.className)&&(s.class=s.className=e.className),t.props=s}(n),n.$$typeof=yn,ue&&ue(n)};var ce=I.__r;I.__r=function(n){ce&&ce(n),n.__c};var de=I.diffed;I.diffed=function(n){de&&de(n);var t=n.props,e=n.__e;e!=null&&n.type==="textarea"&&"value"in t&&t.value!==e.value&&(e.value=t.value==null?"":t.value)};function fe(n){if(n===0)return 1;{const t=Math.PI*n;return Math.sin(t)/t}}function je(n,t,e){return fe(t*n)*fe(2*n/e)}function Pn(n){function t(i,s,o){return(i*24+s)*2+o}const e=new Float32Array(33*24*2);for(let i=0;i<33;i++){const s=i/32;let o=0;for(let r=0;r<24;r++){const l=je(s-r+11,n,24);e[t(i,r,0)]=l,o+=l}for(let r=0;r<24;r++)e[t(i,r,0)]/=o}for(let i=0;i<32;i++)for(let s=0;s<24;s++){const o=e[t(i,s,0)],r=e[t(i+1,s,0)];e[t(i,s,1)]=r-o}return e}const Q=Pn(1);function Ve(n,t){return t<0?n.length?n[0]:0:t>=n.length?n.length?n[n.length-1]:0:n[t]}function K(n,t,e){const i=Math.floor(e),s=(e-i)*32,o=Math.floor(s),r=s-o,l=o*24;let h=0;for(let u=0;u<24;u++){const _=i+u-11,a=(l+u)*2;h+=Ve(t,_)*(n[a]+n[a+1]*r)}return h}function vt(n,t,e,i){const s=Math.floor(i),o=i-s;let r=0;for(let h=0;h<512;h++){const u=je(o-h+255,n,512);t[h]=u,r+=u}for(let h=0;h<512;h++)t[h]/=r;let l=0;for(let h=0;h<512;h++){const u=s+h-255;l+=Ve(e,u)*t[h]}return l}function En(n){return Ze(n,(t,e)=>K(Q,t,e),12)}function et(n){const t=new Float32Array(512);return Ze(n,(e,i)=>vt(1,t,e,i),256)}function zn(n,t){if(n.loopStart===-1||t<n.loopEnd)return t;const e=n.loopEnd-n.loopStart,i=t-n.loopEnd;return n.loopStart+i-e*Math.floor(i/e)}function Ze(n,t,e){if(n.loopStart===-1)return n;const i=new Float32Array(Math.ceil(n.loopEnd)+e);let s=0;for(let o=0;o<i.length;o++)s===Math.floor(s)?i[o]=n.samples[s]:i[o]=t(n.samples,s),s=zn(n,s+1);return{...n,samples:i}}function An(n,t){if(n.loopStart===-1)return n;t=Math.min(t,Math.floor(n.loopEnd-n.loopStart));const e=n.loopEnd-t,i=new Float32Array(n.samples.length),s=new Float32Array(512);for(let o=0;o<i.length;o++)if(o>=e&&o<n.loopEnd){const r=(o-e)/t,l=vt(1,s,n.samples,n.loopStart-(n.loopEnd-o));i[o]=(1-r)*n.samples[o]+r*l}else i[o]=n.samples[o];return{...n,samples:i}}function Un(n){let t=0;for(let i=0;i<n.samples.length;i++)for(let s=0;s<10;s++)t=Math.max(t,Math.abs(K(Q,n.samples,i+s/10)));if(t<.001)return n;const e=new Float32Array(n.samples.length);for(let i=0;i<e.length;i++)e[i]=n.samples[i]/t;return{...n,samples:e}}function Bn(n){if(n.rootFine===0)return n;const t=n.rootFine<50?Math.pow(2,-n.rootFine/1200):Math.pow(2,(100-n.rootFine)/1200),e=t<1?t:1,i=new Float32Array(Math.ceil(n.samples.length/t)),s=new Float32Array(512);for(let o=0;o<i.length;o++)i[o]=vt(e,s,n.samples,o*t);return{samples:i,sampleRate:n.sampleRate,loopStart:n.loopStart===-1?-1:n.loopStart/t,loopEnd:n.loopEnd===-1?-1:n.loopEnd/t,rootNote:n.rootFine<50?n.rootNote:n.rootNote+1,rootFine:0}}function _e(n){const t=n.loopEnd-n.loopStart;if(t<1)return n;const e=Math.ceil(t);if(e===t)return n;const i=e/t;let s=n.loopStart*i;const o=Math.ceil(s)-s;s+=o;const r=new Float32Array(Math.ceil(n.samples.length*i+o)),l=new Float32Array(512);for(let h=0;h<r.length;h++)r[h]=vt(1,l,n.samples,(h-o)/i);return{...n,samples:r,sampleRate:Math.round(n.sampleRate*i),loopStart:s,loopEnd:s+e}}function Nn(n){if(n.loopStart===-1)return n;const t=new Float32Array(Math.floor(n.loopEnd));for(let e=0;e<t.length;e++)t[e]=n.samples[e];return{...n,samples:t,loopStart:Math.floor(n.loopStart),loopEnd:Math.floor(n.loopEnd)}}const Rn=""+new URL("playerWorklet-DQV9RTUY.js",import.meta.url).href;let q,nt;const mt=[];let Ge=-1,rt;function Dn(){rt&&rt(),rt=void 0,q.resume()}function On(){if(rt)return;const n=setTimeout(()=>{q.suspend(),rt=void 0},250);rt=()=>clearTimeout(n)}function pe(n){n.type==="start"&&Dn(),nt.port.postMessage(n)}function Tt(n){q||(q=new AudioContext,q.audioWorklet.addModule(Rn).then(()=>{for(nt=new AudioWorkletNode(q,"wave-player"),nt.connect(q.destination),nt.onprocessorerror=()=>alert("Error!"),nt.port.onmessage=t=>{Ge=t.data,t.data===-1&&On()},mt.reverse();mt.length;)pe(mt.pop())})),nt?pe(n):mt.push(n)}const st={start(n){Tt({type:"start",wave:En(n)})},stop(){Tt({type:"stop"})},tune(n,t){Tt({type:"tune",freq:n,vol:t})},getPosition(){return Ge}};let Hn=0;function it(n){let t=n.samples.length;const e={...n,id:Hn++,min:[new Float32Array(t)],max:[new Float32Array(t)]};let i=e.min[0],s=e.max[0];if(t===0)return e;for(let o=0;o<t;o++){let r=1/0,l=-1/0;for(let h=-5;h<=5;h++){const u=K(Q,n.samples,o+h/10);r=Math.min(r,u),l=Math.max(l,u)}i[o]=r,s[o]=l}for(;;){if(t===1)return e;t=Math.ceil(t/2);const o=i,r=s;i=new Float32Array(t),s=new Float32Array(t),e.min.push(i),e.max.push(s);for(let l=0;l<t;l++){let h=o[l*2],u=r[l*2];l*2+1<o.length&&(h=Math.min(h,o[l*2+1]),u=Math.max(u,r[l*2+1])),i[l]=h,s[l]=u}}}function $n(n,t,e,i){const s=new Float32Array(i),o=new Float32Array(i),r=(e-t)/i,l=n.min[0].length;for(let h=0;h<i;h++){let u=Math.round(t+h*r),_=Math.round(t+(h+1)*r),a=0;if(!(_<=0||u>=l)){for(u=Math.max(0,u),_=Math.min(l,_),u===_&&_++;_-u>=8;)a++,u=Math.floor(u/2),_=Math.floor(_/2);s[h]=1/0,o[h]=-1/0;for(let k=u;k<_;k++)s[h]=Math.min(s[h],n.min[a][k]),o[h]=Math.max(o[h],n.max[a][k])}}return{min:s,max:o}}function Ye(n,t){Ne(()=>{let e;function i(){n(),e=window.requestAnimationFrame(i)}return i(),()=>window.cancelAnimationFrame(e)},t)}var Xn=0;function g(n,t,e,i,s,o){var r,l,h={};for(l in t)l=="ref"?r=t[l]:h[l]=t[l];var u={type:n,props:h,key:e,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Xn,__i:-1,__u:0,__source:s,__self:o};if(typeof n=="function"&&(r=n.defaultProps))for(l in r)h[l]===void 0&&(h[l]=r[l]);return I.vnode&&I.vnode(u),u}function Pt(n){return Math.pow(1.25,n)}function Wn(n){const[t,e]=R(0),[i,s]=R(0),[o,r]=R(window.devicePixelRatio),[l,h]=R(0),[u,_]=R(0),a=xt(null),k=xt(null),f=xt(null),w=Pt(u),E=l/(t*w);Ye(()=>{const p=a.current;if(p){const b=getComputedStyle(p);r(window.devicePixelRatio);const S=parseInt(b.getPropertyValue("width"));e(S),s(parseInt(b.getPropertyValue("height"))),h(p.scrollLeft)}},[]);function v(){return{innerWidth:t,innerHeight:i,width:t*o,height:i*o,viewStart:E,viewEnd:E+1/w}}Ne(()=>{const p=f.current;if(p&&(p.width=t*o,p.height=i*o,p.style.width=`${t}px`,p.style.height=`${i}px`,p.width&&p.height)){const b=p.getContext("2d",{alpha:!1});n.draw({...v(),ctx:b})}},[n.draw,t,i,o,l,u]);function m(p){return n.allowZoom?n.allowZoom(p,t,i):!1}function c(p){const b=a.current;if(b){let S=u;if(p.deltaY<0&&m(Pt(u+1)))S++;else if(u>0&&p.deltaY>0)S--;else return;const U=Pt(S),G=b.getBoundingClientRect(),j=(p.clientX-G.left)/G.width,F=Math.max(0,Math.min(E+j/w-j/U,1-1/U)),L=Math.floor(F*t*U);k.current.style.width=`${t*U}px`,f.current.style.left=`${L}px`,b.scrollLeft=L,_(S),h(L)}}function C(p){p.preventDefault();const b=f.current;if(n.onMouseDown&&b){const S=b.getBoundingClientRect();n.onMouseDown(p,v(),p.clientX-S.left,p.clientY-S.top)}}function x(p){p.preventDefault();const b=f.current;if(n.onMouseUp&&b){const S=b.getBoundingClientRect();n.onMouseUp(p,v(),p.clientX-S.left,p.clientY-S.top)}}function A(p){p.preventDefault();const b=f.current;if(n.onMouseMove&&b){const S=b.getBoundingClientRect();n.onMouseMove(p,v(),p.clientX-S.left,p.clientY-S.top)}}function H(p){p.preventDefault();const b=f.current;if(n.onMouseLeave&&b){const S=b.getBoundingClientRect();n.onMouseLeave(p,v(),p.clientX-S.left,p.clientY-S.top)}}return g("div",{className:n.className,ref:a,style:{position:"relative",overflowX:"scroll"},onWheel:c,children:[g("canvas",{ref:f,style:{position:"absolute",top:0,left:l},onMouseDown:C,onMouseUp:x,onMouseMove:A,onMouseLeave:H}),g("div",{ref:k,style:{height:"100%",width:Math.ceil(t*w)}})]})}function jn({wave:n,setWave:t,crossfadeLen:e}){const[i,s]=R(-1),[o,r]=R(void 0),l=n.samples.length,h=Re(()=>m=>{const{ctx:c,height:C,width:x,viewStart:A,viewEnd:H}=m,p=H-A;function b(F){return C/2-F*C/2}function S(F){return b(K(Q,n.samples,F))}function U(F){return Math.floor((F/l-A)/p*x)}function G(F){return(A+F/x*p)*l}if(c.fillStyle="#FFF",c.fillRect(0,0,x,C),n.loopStart!==-1){const F=U(n.loopStart),L=U(n.loopEnd);c.fillStyle="#FEE",c.fillRect(F,0,L-F,C),c.fillStyle="#F00",c.fillRect(F,0,1,C),c.fillRect(L,0,1,C)}c.fillStyle="#CCC",c.fillRect(0,b(0),x,1);const j=x/(p*l);if(j<1){c.fillStyle="#000";const{min:F,max:L}=$n(n,A*l,H*l,x);for(let N=0;N<x;N++){const $=Math.floor(b(L[N])),D=Math.ceil(b(F[N]));c.fillRect(N,$,1,Math.max(1,D-$))}}else{let F=function(L,N,$){L=Math.max(L,0),N=Math.min(N,x),c.beginPath(),c.moveTo(L,S(G(L)+$));for(let D=L+1;D<=N;D++)c.lineTo(D,S(G(D)+$));c.stroke()};if(c.strokeStyle="#000",F(0,x,0),n.loopStart!==-1){c.strokeStyle="#F00";const L=n.loopEnd-n.loopStart,N=U(n.loopStart),$=U(n.loopEnd),D=j*Math.min(e,L);F(N-D,N,L),F($-D,$,-L)}if(c.strokeStyle="#000",j>=4)for(let L=Math.floor(A*l);L<Math.ceil(H*l);L++)c.beginPath(),c.arc(U(L),b(n.samples[L]),Math.min(j/2,4*devicePixelRatio),0,2*Math.PI),c.stroke()}i!==-1&&(c.fillStyle="blue",c.fillRect(U(i),0,1,C))},[n,i,e]);Ye(()=>{s(st.getPosition())},[]);function u(m,c){return c*m/l<=50}function _(m,c){return Math.floor((m/l-c.viewStart)/(c.viewEnd-c.viewStart)*c.innerWidth)}function a(m,c){return Math.max(0,Math.min(l,(c.viewStart+m/c.innerWidth*(c.viewEnd-c.viewStart))*l))}function k(m,c,C){if(m.button===0)if(n.loopStart===-1){const x=a(C,c);t({...n,loopStart:x,loopEnd:x}),r("loopEnd")}else{const x=Math.abs(_(n.loopStart,c)-C),A=Math.abs(_(n.loopEnd,c)-C);if(Math.min(x,A)>5)return;r(x<A?"loopStart":"loopEnd")}}function f(m){o==="loopStart"?t({...n,loopStart:Math.min(m,n.loopEnd),loopEnd:Math.max(m,n.loopEnd)}):o==="loopEnd"&&t({...n,loopStart:Math.min(m,n.loopStart),loopEnd:Math.max(m,n.loopStart)})}function w(m,c,C){m.button===0&&f(a(C,c))}function E(m){m.button===0&&r(void 0)}function v(m,c,C){C>=c.innerWidth?(f(l),r(void 0)):C<=0&&(f(0),r(void 0))}return g(Wn,{draw:h,allowZoom:u,onMouseDown:k,onMouseMove:w,onMouseUp:E,onMouseLeave:v,className:"wave-display"})}const ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Vn(n){let t="";for(let e=0;e<n.length;e+=3)t+=ot[n[e]>>2],t+=ot[(n[e]&3)<<4|n[e+1]>>4],t+=ot[(n[e+1]&15)<<2|n[e+2]>>6],t+=ot[n[e+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function Zn(n){let t=new Uint8Array(256);for(let s=0;s<ot.length;s++)t[ot.charCodeAt(s)]=s;let e=n.length*.75;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);let i=new Uint8Array(e);for(let s=0,o=0;s<n.length;s+=4){let r=t[n.charCodeAt(s)],l=t[n.charCodeAt(s+1)],h=t[n.charCodeAt(s+2)],u=t[n.charCodeAt(s+3)];i[o++]=r<<2|l>>4,i[o++]=(l&15)<<4|h>>2,i[o++]=(h&3)<<6|u&63}return i}function Gn(n,t,e,i){if(["32f","64"].indexOf(t)>-1&&["32f","64"].indexOf(i)>-1){e.set(n);return}me(t),me(i);let s=Qn(t,i),o={oldMin:Math.pow(2,parseInt(t,10))/2,newMin:Math.pow(2,parseInt(i,10))/2,oldMax:Math.pow(2,parseInt(t,10))/2-1,newMax:Math.pow(2,parseInt(i,10))/2-1};ge(t,n,!0);for(let r=0,l=n.length;r<l;r++)e[r]=s(n[r],o);ge(i,e,!1)}function Yn(n,t){return n>0?n=parseInt(n/t.oldMax*t.newMax,10):n=parseInt(n/t.oldMin*t.newMin,10),n}function qn(n,t){return parseInt(n>0?n*t.newMax:n*t.newMin,10)}function Jn(n,t){return n>0?n/t.oldMax:n/t.oldMin}function Qn(n,t){let e=function(i){return i};return n!=t&&(["32f","64"].includes(n)?e=qn:["32f","64"].includes(t)?e=Jn:e=Yn),e}function me(n){if(n!="32f"&&n!="64"&&(parseInt(n,10)<"8"||parseInt(n,10)>"53"))throw new Error("Invalid bit depth.")}function ge(n,t,e){if(n=="8"){let i=e?-128:128;for(let s=0,o=t.length;s<o;s++)t[s]=t[s]+=i}}const qe=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],Ht=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function Kn(n){let t={index:0,predicted:0,step:7},e=new Uint8Array(n.length),i=[],s=0,o=0;for(let l=0,h=n.length;l<h;l++)l%505==0&&l!=0&&(e.set(ei(i,t),s),s+=256,i=[],o++),i.push(n[l]);let r=n.length/2;return r%2&&r++,e.slice(0,r+512+o*4)}function ti(n,t=256){let e={index:0,predicted:0,step:7},i=new Int16Array(n.length*2),s=[],o=0;for(let r=0,l=n.length;r<l;r++){if(r%t==0&&r!=0){let h=ni(s,e);i.set(h,o),o+=h.length,s=[]}s.push(n[r])}return i}function ei(n,t){let e=ri(n[0],t);for(let i=3,s=n.length;i<s;i+=2){let o=Nt(n[i],t),r=Nt(n[i+1],t);e.push(r<<4|o)}return e}function ni(n,t){t.predicted=ii(n[1]<<8|n[0]),t.index=n[2],t.step=Ht[t.index];let e=[t.predicted,t.predicted];for(let i=4,s=n.length;i<s;i++){let o=n[i],r=o>>4,l=r<<4^o;e.push(Ie(l,t)),e.push(Ie(r,t))}return e}function ii(n){return n>32768?n-65536:n}function Nt(n,t){let e=n-t.predicted,i=0;e>=0?i=0:(i=8,e=-e);let s=Ht[t.index],o=s>>3;return e>s&&(i|=4,e-=s,o+=s),s>>=1,e>s&&(i|=2,e-=s,o+=s),s>>=1,e>s&&(i|=1,o+=s),si(i,o,t),i}function si(n,t,e){n&8?e.predicted-=t:e.predicted+=t,e.predicted<-32768?e.predicted=-32768:e.predicted>32767&&(e.predicted=32767),e.index+=qe[n&7],e.index<0?e.index=0:e.index>88&&(e.index=88)}function Ie(n,t){let e=0;return n&4&&(e+=t.step),n&2&&(e+=t.step>>1),n&1&&(e+=t.step>>2),e+=t.step>>3,n&8&&(e=-e),t.predicted+=e,t.predicted>32767?t.predicted=32767:t.predicted<-32767&&(t.predicted=-32767),oi(n,t),t.predicted}function oi(n,t){t.index+=qe[n],t.index<0?t.index=0:t.index>88&&(t.index=88),t.step=Ht[t.index]}function ri(n,t){Nt(n,t);let e=[];return e.push(n&255),e.push(n>>8&255),e.push(t.index),e.push(0),e}const li=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];function hi(n){let t;n=n==-32768?-32767:n;let e=~n>>8&128;if(e||(n=n*-1),n>32635&&(n=32635),n>=256){let i=li[n>>8&127],s=n>>i+3&15;t=i<<4|s}else t=n>>4;return t^(e^85)}function ai(n){let t=0;n^=85,n&128&&(n&=-129,t=-1);let e=((n&240)>>4)+4,i=0;return e!=4?i=1<<e|(n&15)<<e-4|1<<e-5:i=n<<1|1,i=t===0?i:-i,i*8*-1}function ui(n){let t=new Uint8Array(n.length);for(let e=0,i=n.length;e<i;e++)t[e]=hi(n[e]);return t}function ci(n){let t=new Int16Array(n.length);for(let e=0,i=n.length;e<i;e++)t[e]=ai(n[e]);return t}const di=132,ke=32635,fi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],_i=[0,132,396,924,1980,4092,8316,16764];function pi(n){let t,e,i,s;return t=n>>8&128,t!=0&&(n=-n),n=n+di,n>ke&&(n=ke),e=fi[n>>7&255],i=n>>e+3&15,s=~(t|e<<4|i),s}function mi(n){let t,e,i,s;return n=~n,t=n&128,e=n>>4&7,i=n&15,s=_i[e]+(i<<e+3),t!=0&&(s=-s),s}function gi(n){let t=new Uint8Array(n.length);for(let e=0,i=n.length;e<i;e++)t[e]=pi(n[e]);return t}function Ii(n){let t=new Int16Array(n.length);for(let e=0,i=n.length;e<i;e++)t[e]=mi(n[e]);return t}function Je(n,t,e=0,i=n.length){for(let s=e;s<i;s+=t)ki(n,t,s)}function ki(n,t,e){t--;for(let i=0;i<t;i++){let s=n[e+i];n[e+i]=n[e+t],n[e+t]=s,t--}}function Si(n,t=0,e=n.length){let i="";for(let s=t;s<e;){let o=128,r=191,l=!1,h=n[s++];if(h>=0&&h<=127)i+=String.fromCharCode(h);else{let u=0;h>=194&&h<=223?u=1:h>=224&&h<=239?(u=2,n[s]===224&&(o=160),n[s]===237&&(r=159)):h>=240&&h<=244?(u=3,n[s]===240&&(o=144),n[s]===244&&(r=143)):l=!0,h=h&(1<<8-u-1)-1;for(let _=0;_<u;_++)(n[s]<o||n[s]>r)&&(l=!0),h=h<<6|n[s]&63,s++;l?i+="ï¿½":h<=65535?i+=String.fromCharCode(h):(h-=65536,i+=String.fromCharCode((h>>10&1023)+55296,(h&1023)+56320))}}return i}function Qe(n,t,e=0){let i=0,s=n.length;for(;i<s;){let o=n.codePointAt(i);if(o<128)t[e]=o,e++;else{let r=0,l=0;for(o<=2047?(r=1,l=192):o<=65535?(r=2,l=224):o<=1114111&&(r=3,l=240,i++),t[e]=(o>>6*r)+l,e++;r>0;)t[e]=128|o>>6*(r-1)&63,e++,r--}i++}return e}class yi{constructor(t,e=!1){this.bits=t,this.offset=Math.ceil(t/8),this.max=Math.pow(2,t)-1,this.min=0,this.unpack=this.unpack_,e&&(this.max=Math.pow(2,t)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_)}pack(t,e,i=0){e=this.clamp_(Math.round(e));for(let s=0,o=this.offset;s<o;s++)t[i]=Math.floor(e/Math.pow(2,s*8))&255,i++;return i}unpack_(t,e=0){let i=0;for(let s=0;s<this.offset;s++)i+=t[e+s]*Math.pow(256,s);return i}unpackSigned_(t,e=0){return this.sign_(this.unpack_(t,e))}clamp_(t){return t>this.max?this.max:t<this.min?this.min:t}sign_(t){return t>this.max&&(t-=this.max*2+2),t}}class Se{constructor(t,e){this.offset=Math.ceil((t+e)/8),this.ebits=t,this.fbits=e,this.bias=(1<<t-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=t+e,this.fbias=Math.pow(2,-(8*this.offset-1-t))}pack(t,e,i){Math.abs(e)>this.biasP2-this.ebitsFbits*2&&(e=e<0?-1/0:1/0);let s=((e=+e)||1/e)<0||e<0?1:0;e=Math.abs(e);let o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),r=Et(e/Math.pow(2,o)*Math.pow(2,this.fbits));return e!==e?(r=Math.pow(2,this.fbits-1),o=(1<<this.ebits)-1):e!==0&&(e>=Math.pow(2,1-this.bias)?(r/Math.pow(2,this.fbits)>=2&&(o=o+1,r=1),o>this.bias?(o=(1<<this.ebits)-1,r=0):(o=o+this.bias,r=Et(r)-Math.pow(2,this.fbits))):(r=Et(e/Math.pow(2,1-this.bias-this.fbits)),o=0)),this.packFloatBits_(t,i,s,o,r)}unpack(t,e){let i=(1<<this.ebits)-1,s,o="";for(let h=this.offset-1;h>=0;h--){let u=t[h+e].toString(2);o+="00000000".substring(u.length)+u}let r=o.charAt(0)=="1"?-1:1;o=o.substring(1);let l=parseInt(o.substring(0,this.ebits),2);return o=o.substring(this.ebits),l==i?parseInt(o,2)!==0?NaN:r*(1/0):(l===0?(l+=1,s=parseInt(o,2)):s=parseInt("1"+o,2),r*s*this.fbias*Math.pow(2,l-this.bias))}packFloatBits_(t,e,i,s,o){let r=[];r.push(i);for(let a=this.ebits;a>0;a-=1)r[a]=s%2?1:0,s=Math.floor(s/2);let l=r.length;for(let a=this.fbits;a>0;a-=1)r[l+a]=o%2?1:0,o=Math.floor(o/2);let h=r.join(""),u=this.offset+e-1,_=e;for(;u>=e;)t[u]=parseInt(h.substring(0,8),2),h=h.substring(8),u--,_++;return _}}function Et(n){let t=Math.floor(n),e=n-t;return e<.5?t:e>.5||t%2?t+1:t}function lt(n,t=0,e=n.length){return Si(n,t,e)}function z(n){let t=[];return Qe(n,t),t}function ye(n,t,e=0){return Qe(n,t,e)}function Ke(n,t,e,i=0){t=t||{};let s=tn(t.bits,t.fp,t.signed),o=Math.ceil(t.bits/8),r=0,l=i;for(let h=n.length;r<h;r++)i=s.pack(e,n[r],i);return t.be&&Je(e,o,l,i),i}function J(n,t,e,i=0,s=n.length){t=t||{};let o=tn(t.bits,t.fp,t.signed);if(s=bi(n,i,s,o.offset),t.be){let r=wi(n);t.be&&Je(r,o.offset,i,s),we(r,e,i,s,o)}else we(n,e,i,s,o)}function $t(n,t,e,i=0){return Ke([n],t,e,i)}function d(n,t){let e=[];return $t(n,t,e,0),e}function bt(n,t,e=0){let i=[];return J(n,t,i,e,e+Math.ceil(t.bits/8)),i[0]}function we(n,t,e,i,s){let o=s.offset;for(let r=0,l=e;l<i;l+=o,r++)t[r]=s.unpack(n,l)}function wi(n){return new Uint8Array(n)}function bi(n,t,e,i){let s=(e-t)%i;return e-s}function tn(n,t,e){return t&&n==32?new Se(8,23):t&&n==64?new Se(11,52):new yi(n,e)}class Mi{constructor(){this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1},this.supported_containers=["RIFF","RIFX"]}setSignature(t){if(this.head=0,this.container=this.readString(t,4),this.supported_containers.indexOf(this.container)===-1)throw Error("Not a supported format.");this.uInt32.be=this.container==="RIFX",this.chunkSize=this.readUInt32(t),this.format=this.readString(t,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(t)}}findChunk(t,e=!1){let i=this.signature.subChunks,s=[];for(let o=0;o<i.length;o++)if(i[o].chunkId==t)if(e)s.push(i[o]);else return i[o];return t=="LIST"&&s.length?s:null}readString(t,e){let i="";return i=lt(t,this.head,this.head+e),this.head+=e,i}readUInt32(t){let e=bt(t,this.uInt32,this.head);return this.head+=4,e}getSubChunksIndex_(t){let e=[],i=this.head;for(;i<=t.length-8;)e.push(this.getSubChunkIndex_(t,i)),i+=8+e[e.length-1].chunkSize,i=i%2?i+1:i;return e}getSubChunkIndex_(t,e){let i={chunkId:this.getChunkId_(t,e),chunkSize:this.getChunkSize_(t,e)};if(i.chunkId=="LIST")i.format=lt(t,e+8,e+12),this.head+=4,i.subChunks=this.getSubChunksIndex_(t);else{let s=i.chunkSize%2?i.chunkSize+1:i.chunkSize;this.head=e+8+s,i.chunkData={start:e+8,end:this.head}}return i}getChunkId_(t,e){return this.head+=4,lt(t,e,e+4)}getChunkSize_(t,e){return this.head+=4,bt(t,this.uInt32,e+4)}}class Xt extends Mi{constructor(){super(),this.supported_containers.push("RF64"),this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]},this.fact={chunkId:"",chunkSize:0,dwSampleLength:0},this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]},this.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]},this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""},this.iXML={chunkId:"",chunkSize:0,value:""},this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0},this.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)},this.LIST=[],this.junk={chunkId:"",chunkSize:0,chunkData:[]},this._PMX={chunkId:"",chunkSize:0,value:""},this.uInt16={bits:16,be:!1,signed:!1,fp:!1}}fromBuffer(t,e=!0){if(this.clearHeaders(),this.setSignature(t),this.uInt16.be=this.uInt32.be,this.format!="WAVE")throw Error('Could not find the "WAVE" format identifier');this.readDs64Chunk_(t),this.readFmtChunk_(t),this.readFactChunk_(t),this.readBextChunk_(t),this.readiXMLChunk_(t),this.readCueChunk_(t),this.readSmplChunk_(t),this.readDataChunk_(t,e),this.readJunkChunk_(t),this.readLISTChunk_(t),this.read_PMXChunk_(t)}clearHeaders(){let t=new Xt;Object.assign(this.fmt,t.fmt),Object.assign(this.fact,t.fact),Object.assign(this.cue,t.cue),Object.assign(this.smpl,t.smpl),Object.assign(this.bext,t.bext),Object.assign(this.iXML,t.iXML),Object.assign(this.ds64,t.ds64),Object.assign(this.data,t.data),this.LIST=[],Object.assign(this.junk,t.junk),Object.assign(this._PMX,t._PMX)}readFmtChunk_(t){let e=this.findChunk("fmt ");if(e)this.head=e.chunkData.start,this.fmt.chunkId=e.chunkId,this.fmt.chunkSize=e.chunkSize,this.fmt.audioFormat=this.readUInt16_(t),this.fmt.numChannels=this.readUInt16_(t),this.fmt.sampleRate=this.readUInt32(t),this.fmt.byteRate=this.readUInt32(t),this.fmt.blockAlign=this.readUInt16_(t),this.fmt.bitsPerSample=this.readUInt16_(t),this.readFmtExtension_(t);else throw Error('Could not find the "fmt " chunk')}readFmtExtension_(t){this.fmt.chunkSize>16&&(this.fmt.cbSize=this.readUInt16_(t),this.fmt.chunkSize>18&&(this.fmt.validBitsPerSample=this.readUInt16_(t),this.fmt.chunkSize>20&&(this.fmt.dwChannelMask=this.readUInt32(t),this.fmt.subformat=[this.readUInt32(t),this.readUInt32(t),this.readUInt32(t),this.readUInt32(t)])))}readFactChunk_(t){let e=this.findChunk("fact");e&&(this.head=e.chunkData.start,this.fact.chunkId=e.chunkId,this.fact.chunkSize=e.chunkSize,this.fact.dwSampleLength=this.readUInt32(t))}readCueChunk_(t){let e=this.findChunk("cue ");if(e){this.head=e.chunkData.start,this.cue.chunkId=e.chunkId,this.cue.chunkSize=e.chunkSize,this.cue.dwCuePoints=this.readUInt32(t);for(let i=0;i<this.cue.dwCuePoints;i++)this.cue.points.push({dwName:this.readUInt32(t),dwPosition:this.readUInt32(t),fccChunk:this.readString(t,4),dwChunkStart:this.readUInt32(t),dwBlockStart:this.readUInt32(t),dwSampleOffset:this.readUInt32(t)})}}readSmplChunk_(t){let e=this.findChunk("smpl");if(e){this.head=e.chunkData.start,this.smpl.chunkId=e.chunkId,this.smpl.chunkSize=e.chunkSize,this.smpl.dwManufacturer=this.readUInt32(t),this.smpl.dwProduct=this.readUInt32(t),this.smpl.dwSamplePeriod=this.readUInt32(t),this.smpl.dwMIDIUnityNote=this.readUInt32(t),this.smpl.dwMIDIPitchFraction=this.readUInt32(t),this.smpl.dwSMPTEFormat=this.readUInt32(t),this.smpl.dwSMPTEOffset=this.readUInt32(t),this.smpl.dwNumSampleLoops=this.readUInt32(t),this.smpl.dwSamplerData=this.readUInt32(t);for(let i=0;i<this.smpl.dwNumSampleLoops;i++)this.smpl.loops.push({dwName:this.readUInt32(t),dwType:this.readUInt32(t),dwStart:this.readUInt32(t),dwEnd:this.readUInt32(t),dwFraction:this.readUInt32(t),dwPlayCount:this.readUInt32(t)})}}readDataChunk_(t,e){let i=this.findChunk("data");if(i)this.data.chunkId="data",this.data.chunkSize=i.chunkSize,e&&(this.data.samples=t.slice(i.chunkData.start,i.chunkData.end));else throw Error('Could not find the "data" chunk')}readBextChunk_(t){let e=this.findChunk("bext");e&&(this.head=e.chunkData.start,this.bext.chunkId=e.chunkId,this.bext.chunkSize=e.chunkSize,this.bext.description=this.readString(t,256),this.bext.originator=this.readString(t,32),this.bext.originatorReference=this.readString(t,32),this.bext.originationDate=this.readString(t,10),this.bext.originationTime=this.readString(t,8),this.bext.timeReference=[this.readUInt32(t),this.readUInt32(t)],this.bext.version=this.readUInt16_(t),this.bext.UMID=this.readString(t,64),this.bext.loudnessValue=this.readUInt16_(t),this.bext.loudnessRange=this.readUInt16_(t),this.bext.maxTruePeakLevel=this.readUInt16_(t),this.bext.maxMomentaryLoudness=this.readUInt16_(t),this.bext.maxShortTermLoudness=this.readUInt16_(t),this.bext.reserved=this.readString(t,180),this.bext.codingHistory=this.readString(t,this.bext.chunkSize-602))}readiXMLChunk_(t){let e=this.findChunk("iXML");e&&(this.head=e.chunkData.start,this.iXML.chunkId=e.chunkId,this.iXML.chunkSize=e.chunkSize,this.iXML.value=lt(t,this.head,this.head+this.iXML.chunkSize))}readDs64Chunk_(t){let e=this.findChunk("ds64");if(e)this.head=e.chunkData.start,this.ds64.chunkId=e.chunkId,this.ds64.chunkSize=e.chunkSize,this.ds64.riffSizeHigh=this.readUInt32(t),this.ds64.riffSizeLow=this.readUInt32(t),this.ds64.dataSizeHigh=this.readUInt32(t),this.ds64.dataSizeLow=this.readUInt32(t),this.ds64.originationTime=this.readUInt32(t),this.ds64.sampleCountHigh=this.readUInt32(t),this.ds64.sampleCountLow=this.readUInt32(t);else if(this.container=="RF64")throw Error('Could not find the "ds64" chunk')}readLISTChunk_(t){let e=this.findChunk("LIST",!0);if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];this.LIST.push({chunkId:s.chunkId,chunkSize:s.chunkSize,format:s.format,subChunks:[]});for(let o=0;o<s.subChunks.length;o++)this.readLISTSubChunks_(s.subChunks[o],s.format,t)}}readLISTSubChunks_(t,e,i){e=="adtl"?["labl","note","ltxt"].indexOf(t.chunkId)>-1&&this.readLISTadtlSubChunks_(i,t):e=="INFO"&&this.readLISTINFOSubChunks_(i,t)}readLISTadtlSubChunks_(t,e){this.head=e.chunkData.start;let i={chunkId:e.chunkId,chunkSize:e.chunkSize,dwName:this.readUInt32(t)};e.chunkId=="ltxt"?(i.dwSampleLength=this.readUInt32(t),i.dwPurposeID=this.readUInt32(t),i.dwCountry=this.readUInt16_(t),i.dwLanguage=this.readUInt16_(t),i.dwDialect=this.readUInt16_(t),i.dwCodePage=this.readUInt16_(t),i.value=""):i.value=this.readZSTR_(t,this.head),this.LIST[this.LIST.length-1].subChunks.push(i)}readLISTINFOSubChunks_(t,e){this.head=e.chunkData.start,this.LIST[this.LIST.length-1].subChunks.push({chunkId:e.chunkId,chunkSize:e.chunkSize,value:this.readZSTR_(t,this.head)})}readJunkChunk_(t){let e=this.findChunk("junk");e&&(this.junk={chunkId:e.chunkId,chunkSize:e.chunkSize,chunkData:[].slice.call(t.slice(e.chunkData.start,e.chunkData.end))})}read_PMXChunk_(t){let e=this.findChunk("_PMX");e&&(this.head=e.chunkData.start,this._PMX.chunkId=e.chunkId,this._PMX.chunkSize=e.chunkSize,this._PMX.value=lt(t,this.head,this.head+this._PMX.chunkSize))}readZSTR_(t,e=0){for(let i=e;i<t.length&&(this.head++,t[i]!==0);i++);return lt(t,e,this.head-1)}readUInt16_(t){let e=bt(t,this.uInt16,this.head);return this.head+=2,e}}function O(n,t){let e=z(n);for(let i=e.length;i<t;i++)e.push(0);return e}class Ci extends Xt{toBuffer(){this.uInt16.be=this.container==="RIFX",this.uInt32.be=this.uInt16.be;let t=[this.getJunkBytes_(),this.getDs64Bytes_(),this.getBextBytes_(),this.getiXMLBytes_(),this.getFmtBytes_(),this.getFactBytes_(),z(this.data.chunkId),d(this.data.samples.length,this.uInt32),this.data.samples,this.getCueBytes_(),this.getSmplBytes_(),this.getLISTBytes_(),this.get_PMXBytes_()],e=0;for(let o=0;o<t.length;o++)e+=t[o].length;let i=new Uint8Array(e+12),s=0;s=ye(this.container,i,s),s=$t(e+4,this.uInt32,i,s),s=ye(this.format,i,s);for(let o=0;o<t.length;o++)i.set(t[o],s),s+=t[o].length;return i}getBextBytes_(){let t=[];return this.enforceBext_(),this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,t=t.concat(z(this.bext.chunkId),d(602+this.bext.codingHistory.length,this.uInt32),O(this.bext.description,256),O(this.bext.originator,32),O(this.bext.originatorReference,32),O(this.bext.originationDate,10),O(this.bext.originationTime,8),d(this.bext.timeReference[0],this.uInt32),d(this.bext.timeReference[1],this.uInt32),d(this.bext.version,this.uInt16),O(this.bext.UMID,64),d(this.bext.loudnessValue,this.uInt16),d(this.bext.loudnessRange,this.uInt16),d(this.bext.maxTruePeakLevel,this.uInt16),d(this.bext.maxMomentaryLoudness,this.uInt16),d(this.bext.maxShortTermLoudness,this.uInt16),O(this.bext.reserved,180),O(this.bext.codingHistory,this.bext.codingHistory.length))),this.enforceByteLen_(t),t}enforceBext_(){for(let t in this.bext)if(this.bext.hasOwnProperty(t)&&this.bext[t]&&t!="timeReference"){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")}getiXMLBytes_(){let t=[];if(this.iXML.chunkId){let e=z(this.iXML.value);this.iXML.chunkSize=e.length,t=t.concat(z(this.iXML.chunkId),d(this.iXML.chunkSize,this.uInt32),e)}return this.enforceByteLen_(t),t}getDs64Bytes_(){let t=[];return this.ds64.chunkId&&(t=t.concat(z(this.ds64.chunkId),d(this.ds64.chunkSize,this.uInt32),d(this.ds64.riffSizeHigh,this.uInt32),d(this.ds64.riffSizeLow,this.uInt32),d(this.ds64.dataSizeHigh,this.uInt32),d(this.ds64.dataSizeLow,this.uInt32),d(this.ds64.originationTime,this.uInt32),d(this.ds64.sampleCountHigh,this.uInt32),d(this.ds64.sampleCountLow,this.uInt32))),this.enforceByteLen_(t),t}getCueBytes_(){let t=[];if(this.cue.chunkId){let e=this.getCuePointsBytes_();t=t.concat(z(this.cue.chunkId),d(e.length+4,this.uInt32),d(this.cue.dwCuePoints,this.uInt32),e)}return this.enforceByteLen_(t),t}getCuePointsBytes_(){let t=[];for(let e=0;e<this.cue.dwCuePoints;e++)t=t.concat(d(this.cue.points[e].dwName,this.uInt32),d(this.cue.points[e].dwPosition,this.uInt32),z(this.cue.points[e].fccChunk),d(this.cue.points[e].dwChunkStart,this.uInt32),d(this.cue.points[e].dwBlockStart,this.uInt32),d(this.cue.points[e].dwSampleOffset,this.uInt32));return t}getSmplBytes_(){let t=[];if(this.smpl.chunkId){let e=this.getSmplLoopsBytes_();t=t.concat(z(this.smpl.chunkId),d(e.length+36,this.uInt32),d(this.smpl.dwManufacturer,this.uInt32),d(this.smpl.dwProduct,this.uInt32),d(this.smpl.dwSamplePeriod,this.uInt32),d(this.smpl.dwMIDIUnityNote,this.uInt32),d(this.smpl.dwMIDIPitchFraction,this.uInt32),d(this.smpl.dwSMPTEFormat,this.uInt32),d(this.smpl.dwSMPTEOffset,this.uInt32),d(this.smpl.dwNumSampleLoops,this.uInt32),d(this.smpl.dwSamplerData,this.uInt32),e)}return this.enforceByteLen_(t),t}getSmplLoopsBytes_(){let t=[];for(let e=0;e<this.smpl.dwNumSampleLoops;e++)t=t.concat(d(this.smpl.loops[e].dwName,this.uInt32),d(this.smpl.loops[e].dwType,this.uInt32),d(this.smpl.loops[e].dwStart,this.uInt32),d(this.smpl.loops[e].dwEnd,this.uInt32),d(this.smpl.loops[e].dwFraction,this.uInt32),d(this.smpl.loops[e].dwPlayCount,this.uInt32));return t}getFactBytes_(){let t=[];return this.fact.chunkId&&(t=t.concat(z(this.fact.chunkId),d(this.fact.chunkSize,this.uInt32),d(this.fact.dwSampleLength,this.uInt32))),this.enforceByteLen_(t),t}getFmtBytes_(){let t=[];if(this.fmt.chunkId){let e=t.concat(z(this.fmt.chunkId),d(this.fmt.chunkSize,this.uInt32),d(this.fmt.audioFormat,this.uInt16),d(this.fmt.numChannels,this.uInt16),d(this.fmt.sampleRate,this.uInt32),d(this.fmt.byteRate,this.uInt32),d(this.fmt.blockAlign,this.uInt16),d(this.fmt.bitsPerSample,this.uInt16),this.getFmtExtensionBytes_());return this.enforceByteLen_(e),e}throw Error('Could not find the "fmt " chunk')}getFmtExtensionBytes_(){let t=[];return this.fmt.chunkSize>16&&(t=t.concat(d(this.fmt.cbSize,this.uInt16))),this.fmt.chunkSize>18&&(t=t.concat(d(this.fmt.validBitsPerSample,this.uInt16))),this.fmt.chunkSize>20&&(t=t.concat(d(this.fmt.dwChannelMask,this.uInt32))),this.fmt.chunkSize>24&&(t=t.concat(d(this.fmt.subformat[0],this.uInt32),d(this.fmt.subformat[1],this.uInt32),d(this.fmt.subformat[2],this.uInt32),d(this.fmt.subformat[3],this.uInt32))),t}getLISTBytes_(){let t=[];for(let e=0;e<this.LIST.length;e++){let i=this.getLISTSubChunksBytes_(this.LIST[e].subChunks,this.LIST[e].format);t=t.concat(z(this.LIST[e].chunkId),d(i.length+4,this.uInt32),z(this.LIST[e].format),i)}return this.enforceByteLen_(t),t}getLISTSubChunksBytes_(t,e){let i=[];for(let s=0,o=t.length;s<o;s++)e=="INFO"?i=i.concat(this.getLISTINFOSubChunksBytes_(t[s])):e=="adtl"&&(i=i.concat(this.getLISTadtlSubChunksBytes_(t[s]))),this.enforceByteLen_(i);return i}getLISTINFOSubChunksBytes_(t){let e=[],i=O(t.value,t.value.length);return e=e.concat(z(t.chunkId),d(i.length+1,this.uInt32),i),e.push(0),e}getLISTadtlSubChunksBytes_(t){let e=[];if(["labl","note"].indexOf(t.chunkId)>-1){let i=O(t.value,t.value.length);e=e.concat(z(t.chunkId),d(i.length+4+1,this.uInt32),d(t.dwName,this.uInt32),i),e.push(0)}else t.chunkId=="ltxt"&&(e=e.concat(this.getLtxtChunkBytes_(t)));return e}getLtxtChunkBytes_(t){return[].concat(z(t.chunkId),d(t.value.length+20,this.uInt32),d(t.dwName,this.uInt32),d(t.dwSampleLength,this.uInt32),d(t.dwPurposeID,this.uInt32),d(t.dwCountry,this.uInt16),d(t.dwLanguage,this.uInt16),d(t.dwDialect,this.uInt16),d(t.dwCodePage,this.uInt16),O(t.value,t.value.length))}get_PMXBytes_(){let t=[];if(this._PMX.chunkId){let e=z(this._PMX.value);this._PMX.chunkSize=e.length,t=t.concat(z(this._PMX.chunkId),d(this._PMX.chunkSize,this.uInt32),e)}return this.enforceByteLen_(t),t}getJunkBytes_(){let t=[];return this.junk.chunkId?t.concat(z(this.junk.chunkId),d(this.junk.chunkData.length,this.uInt32),this.junk.chunkData):(this.enforceByteLen_(t),t)}enforceByteLen_(t){t.length%2&&t.push(0)}}function vi(n){let t=[];if(n.length>0)if(n[0].constructor!==Number){t=new Float64Array(n[0].length*n.length);for(let e=0,i=n[0].length,s=0;e<i;e++)for(let o=0,r=n.length;o<r;o++,s++)t[s]=n[o][e]}else t=n;return t}function Li(n,t,e=Float64Array){let i=[];for(let s=0;s<t;s++)i[s]=new e(n.length/t);for(let s=0;s<t;s++)for(let o=s,r=0;o<n.length;o+=t,r++)i[s][r]=n[o];return i}function xi(n,t){let e=n*t/8;return!(n<1||e>65535)}function en(n,t,e){let i=n*(t/8)*e;return!(e<1||i>4294967295)}class Fi extends Ci{constructor(){super(),this.bitDepth="0",this.dataType={bits:0,be:!1},this.WAV_AUDIO_FORMATS={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3}}fromScratch(t,e,i,s,o){o=o||{},this.clearHeaders(),this.newWavFile_(t,e,i,s,o)}fromBuffer(t,e=!0){super.fromBuffer(t,e),this.bitDepthFromFmt_(),this.updateDataType_()}toBuffer(){return this.validateWavHeader_(),super.toBuffer()}getSamples(t=!1,e=Float64Array){let i=new e(this.data.samples.length/(this.dataType.bits/8));return J(this.data.samples,this.dataType,i,0,this.data.samples.length),!t&&this.fmt.numChannels>1?Li(i,this.fmt.numChannels,e):i}getSample(t){if(t=t*(this.dataType.bits/8),t+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");return bt(this.data.samples.slice(t,t+this.dataType.bits/8),this.dataType)}setSample(t,e){if(t=t*(this.dataType.bits/8),t+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");$t(e,this.dataType,this.data.samples,t)}getiXML(){return this.iXML.value}setiXML(t){if(typeof t!="string")throw new TypeError("iXML value must be a string.");this.iXML.value=t,this.iXML.chunkId="iXML"}get_PMX(){return this._PMX.value}set_PMX(t){if(typeof t!="string")throw new TypeError("_PMX value must be a string.");this._PMX.value=t,this._PMX.chunkId="_PMX"}newWavFile_(t,e,i,s,o){o.container||(o.container="RIFF"),this.container=o.container,this.bitDepth=i,s=vi(s),this.updateDataType_();let r=this.dataType.bits/8;this.data.samples=new Uint8Array(s.length*r),Ke(s,this.dataType,this.data.samples,0),this.makeWavHeader_(i,t,e,r,this.data.samples.length,o),this.data.chunkId="data",this.data.chunkSize=this.data.samples.length,this.validateWavHeader_()}makeWavHeader_(t,e,i,s,o,r){t=="4"?this.createADPCMHeader_(t,e,i,s,o,r):t=="8a"||t=="8m"?this.createALawMulawHeader_(t,e,i,s,o,r):Object.keys(this.WAV_AUDIO_FORMATS).indexOf(t)==-1||e>2?this.createExtensibleHeader_(t,e,i,s,o,r):this.createPCMHeader_(t,e,i,s,o,r)}createPCMHeader_(t,e,i,s,o,r){this.container=r.container,this.chunkSize=36+o,this.format="WAVE",this.bitDepth=t,this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.WAV_AUDIO_FORMATS[t]||65534,numChannels:e,sampleRate:i,byteRate:e*s*i,blockAlign:e*s,bitsPerSample:parseInt(t,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}}createADPCMHeader_(t,e,i,s,o,r){this.createPCMHeader_(t,e,i,s,o,r),this.chunkSize=40+o,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:o*2}}createExtensibleHeader_(t,e,i,s,o,r){this.createPCMHeader_(t,e,i,s,o,r),this.chunkSize=60+o,this.fmt.chunkSize=40,this.fmt.bitsPerSample=(parseInt(t,10)-1|7)+1,this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(t,10),this.fmt.dwChannelMask=Ti(e),this.fmt.subformat=[1,1048576,2852126848,1905997824]}createALawMulawHeader_(t,e,i,s,o,r){this.createPCMHeader_(t,e,i,s,o,r),this.chunkSize=40+o,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:o}}bitDepthFromFmt_(){this.fmt.audioFormat===3&&this.fmt.bitsPerSample===32?this.bitDepth="32f":this.fmt.audioFormat===6?this.bitDepth="8a":this.fmt.audioFormat===7?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()}validateBitDepth_(){if(!this.WAV_AUDIO_FORMATS[this.bitDepth]){if(parseInt(this.bitDepth,10)>8&&parseInt(this.bitDepth,10)<54)return!0;throw new Error("Invalid bit depth.")}return!0}updateDataType_(){this.dataType={bits:(parseInt(this.bitDepth,10)-1|7)+1,fp:this.bitDepth=="32f"||this.bitDepth=="64",signed:this.bitDepth!="8",be:this.container=="RIFX"},["4","8a","8m"].indexOf(this.bitDepth)>-1&&(this.dataType.bits=8,this.dataType.signed=!1)}validateWavHeader_(){if(this.validateBitDepth_(),!xi(this.fmt.numChannels,this.fmt.bitsPerSample))throw new Error("Invalid number of channels.");if(!en(this.fmt.numChannels,this.fmt.bitsPerSample,this.fmt.sampleRate))throw new Error("Invalid sample rate.")}}function Ti(n){let t=0;return n===1?t=4:n===2?t=3:n===4?t=51:n===6?t=63:n===8&&(t=1599),t}class Pi extends Fi{getTag(t){let e=this.getTagIndex_(t);return e.TAG!==null?this.LIST[e.LIST].subChunks[e.TAG].value:null}setTag(t,e){t=Ei(t);let i=this.getTagIndex_(t);i.TAG!==null?(this.LIST[i.LIST].subChunks[i.TAG].chunkSize=e.length+1,this.LIST[i.LIST].subChunks[i.TAG].value=e):i.LIST!==null?this.LIST[i.LIST].subChunks.push({chunkId:t,chunkSize:e.length+1,value:e}):(this.LIST.push({chunkId:"LIST",chunkSize:8+e.length+1,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:t,chunkSize:e.length+1,value:e}))}deleteTag(t){let e=this.getTagIndex_(t);return e.TAG!==null?(this.LIST[e.LIST].subChunks.splice(e.TAG,1),!0):!1}listTags(){let t=this.getLISTIndex("INFO"),e={};if(t!==null)for(let i=0,s=this.LIST[t].subChunks.length;i<s;i++)e[this.LIST[t].subChunks[i].chunkId]=this.LIST[t].subChunks[i].value;return e}getLISTIndex(t){for(let e=0,i=this.LIST.length;e<i;e++)if(this.LIST[e].format==t)return e;return null}getTagIndex_(t){let e={LIST:null,TAG:null};for(let i=0,s=this.LIST.length;i<s;i++)if(this.LIST[i].format=="INFO"){e.LIST=i;for(let o=0,r=this.LIST[i].subChunks.length;o<r;o++)if(this.LIST[i].subChunks[o].chunkId==t){e.TAG=o;break}break}return e}}function Ei(n){if(n.constructor!==String)throw new Error("Invalid tag name.");if(n.length<4)for(let t=0,e=4-n.length;t<e;t++)n+=" ";return n}class be extends Pi{listCuePoints(){let t=this.getCuePoints_();for(let e=0,i=t.length;e<i;e++)t[e].position=t[e].dwSampleOffset/this.fmt.sampleRate*1e3,t[e].dwSampleLength?(t[e].end=t[e].dwSampleLength/this.fmt.sampleRate*1e3,t[e].end+=t[e].position):t[e].end=null,delete t[e].value;return t}setCuePoint(t){this.cue.chunkId="cue ",t.label||(t.label="");let e=this.getCuePoints_();this.clearLISTadtl_(),this.cue.points=[],t.dwSampleOffset=t.position*this.fmt.sampleRate/1e3,t.dwSampleLength=0,t.end&&(t.dwSampleLength=t.end*this.fmt.sampleRate/1e3-t.dwSampleOffset),e.length===0?this.setCuePoint_(t,1):this.setCuePointInOrder_(e,t),this.cue.dwCuePoints=this.cue.points.length}deleteCuePoint(t){this.cue.chunkId="cue ";let e=this.getCuePoints_();this.clearLISTadtl_();let i=this.cue.points.length;this.cue.points=[];for(let s=0;s<i;s++)s+1!==t&&this.setCuePoint_(e[s],s+1);this.cue.dwCuePoints=this.cue.points.length,this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.clearLISTadtl_())}updateLabel(t,e){let i=this.getLISTIndex("adtl");if(i!==null)for(let s=0,o=this.LIST[i].subChunks.length;s<o;s++)this.LIST[i].subChunks[s].dwName==t&&(this.LIST[i].subChunks[s].value=e)}getCuePoints_(){let t=[];for(let e=0;e<this.cue.points.length;e++){let i=this.cue.points[e],s=this.getDataForCuePoint_(i.dwName);s.label=s.value?s.value:"",s.dwPosition=i.dwPosition,s.fccChunk=i.fccChunk,s.dwChunkStart=i.dwChunkStart,s.dwBlockStart=i.dwBlockStart,s.dwSampleOffset=i.dwSampleOffset,t.push(s)}return t}getDataForCuePoint_(t){let e=this.getLISTIndex("adtl"),i={};return e!==null&&this.getCueDataFromLIST_(i,e,t),i}getCueDataFromLIST_(t,e,i){for(let s=0,o=this.LIST[e].subChunks.length;s<o;s++)if(this.LIST[e].subChunks[s].dwName==i){let r=this.LIST[e].subChunks[s];t.value=r.value||t.value,t.dwName=r.dwName||0,t.dwSampleLength=r.dwSampleLength||0,t.dwPurposeID=r.dwPurposeID||0,t.dwCountry=r.dwCountry||0,t.dwLanguage=r.dwLanguage||0,t.dwDialect=r.dwDialect||0,t.dwCodePage=r.dwCodePage||0}}setCuePoint_(t,e){this.cue.points.push({dwName:e,dwPosition:t.dwPosition?t.dwPosition:0,fccChunk:t.fccChunk?t.fccChunk:"data",dwChunkStart:t.dwChunkStart?t.dwChunkStart:0,dwBlockStart:t.dwBlockStart?t.dwBlockStart:0,dwSampleOffset:t.dwSampleOffset}),this.setLabl_(t,e)}setCuePointInOrder_(t,e){let i=!1;for(let s=0;s<t.length;s++)t[s].dwSampleOffset>e.dwSampleOffset&&!i?(this.setCuePoint_(e,s+1),this.setCuePoint_(t[s],s+2),i=!0):this.setCuePoint_(t[s],i?s+2:s+1);i||this.setCuePoint_(e,this.cue.points.length+1)}clearLISTadtl_(){for(let t=0,e=this.LIST.length;t<e;t++)this.LIST[t].format=="adtl"&&this.LIST.splice(t)}setLabl_(t,e){let i=this.getLISTIndex("adtl");i===null&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),i=this.LIST.length-1),this.setLabelText_(i,t,e),t.dwSampleLength&&this.setLtxtChunk_(i,t,e)}setLabelText_(t,e,i){this.LIST[t].subChunks.push({chunkId:"labl",chunkSize:4,dwName:i,value:e.label}),this.LIST[t].chunkSize+=12}setLtxtChunk_(t,e,i){this.LIST[t].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:i,dwSampleLength:e.dwSampleLength,dwPurposeID:e.dwPurposeID||0,dwCountry:e.dwCountry||0,dwLanguage:e.dwLanguage||0,dwDialect:e.dwDialect||0,dwCodePage:e.dwCodePage||0,value:e.label}),this.LIST[t].chunkSize+=28}}class zi{constructor(t,e,i){this.length_=t,this.scaleFactor_=(t-1)/e,this.interpolate=this.sinc,i.method==="point"?this.interpolate=this.point:i.method==="linear"?this.interpolate=this.linear:i.method==="cubic"&&(this.interpolate=this.cubic),this.tangentFactor_=1-Math.max(0,Math.min(1,i.tension||0)),this.sincFilterSize_=i.sincFilterSize||1,this.kernel_=Ui(i.sincWindow||Ai)}point(t,e){return this.getClippedInput_(Math.round(this.scaleFactor_*t),e)}linear(t,e){t=this.scaleFactor_*t;let i=Math.floor(t);return t-=i,(1-t)*this.getClippedInput_(i,e)+t*this.getClippedInput_(i+1,e)}cubic(t,e){t=this.scaleFactor_*t;let i=Math.floor(t),s=[this.getTangent_(i,e),this.getTangent_(i+1,e)],o=[this.getClippedInput_(i,e),this.getClippedInput_(i+1,e)];t-=i;let r=t*t,l=t*r;return(2*l-3*r+1)*o[0]+(l-2*r+t)*s[0]+(-2*l+3*r)*o[1]+(l-r)*s[1]}sinc(t,e){t=this.scaleFactor_*t;let i=Math.floor(t),s=i-this.sincFilterSize_+1,o=i+this.sincFilterSize_,r=0;for(let l=s;l<=o;l++)r+=this.kernel_(t-l)*this.getClippedInput_(l,e);return r}getTangent_(t,e){return this.tangentFactor_*(this.getClippedInput_(t+1,e)-this.getClippedInput_(t-1,e))/2}getClippedInput_(t,e){return 0<=t&&t<this.length_?e[t]:0}}function Ai(n){return Math.exp(-n/2*n/2)}function Ui(n){return function(t){return Bi(t)*n(t)}}function Bi(n){return n===0?1:Math.sin(Math.PI*n)/(Math.PI*n)}class Ni{constructor(t,e,i){let s=2*Math.PI*i/e,o=0;this.filters=[];for(let r=0;r<=t;r++)r-t/2===0?this.filters[r]=s:(this.filters[r]=Math.sin(s*(r-t/2))/(r-t/2),this.filters[r]*=.54-.46*Math.cos(2*Math.PI*r/t)),o=o+this.filters[r];for(let r=0;r<=t;r++)this.filters[r]/=o;this.z=this.initZ_()}filter(t){this.z.buf[this.z.pointer]=t;let e=0;for(let i=0,s=this.z.buf.length;i<s;i++)e+=this.filters[i]*this.z.buf[(this.z.pointer+i)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,e}reset(){this.z=this.initZ_()}initZ_(){let t=[];for(let e=0;e<this.filters.length-1;e++)t.push(0);return{buf:t,pointer:0}}}class Ri{constructor(t,e,i){let s=[];for(let o=0;o<t;o++)s.push(this.getCoeffs_({Fs:e,Fc:i,Q:.5/Math.sin(Math.PI/(t*2)*(o+.5))}));this.stages=[];for(let o=0;o<s.length;o++)this.stages[o]={b0:s[o].b[0],b1:s[o].b[1],b2:s[o].b[2],a1:s[o].a[0],a2:s[o].a[1],k:s[o].k,z:[0,0]}}filter(t){let e=t;for(let i=0,s=this.stages.length;i<s;i++)e=this.runStage_(i,e);return e}getCoeffs_(t){let e={};e.a=[],e.b=[];let i=this.preCalc_(t,e);return e.k=1,e.b.push((1-i.cw)/(2*i.a0)),e.b.push(2*e.b[0]),e.b.push(e.b[0]),e}preCalc_(t,e){let i={},s=2*Math.PI*t.Fc/t.Fs;return i.alpha=Math.sin(s)/(2*t.Q),i.cw=Math.cos(s),i.a0=1+i.alpha,e.a0=i.a0,e.a.push(-2*i.cw/i.a0),e.k=1,e.a.push((1-i.alpha)/i.a0),i}runStage_(t,e){let i=e*this.stages[t].k-this.stages[t].a1*this.stages[t].z[0]-this.stages[t].a2*this.stages[t].z[1],s=this.stages[t].b0*i+this.stages[t].b1*this.stages[t].z[0]+this.stages[t].b2*this.stages[t].z[1];return this.stages[t].z[1]=this.stages[t].z[0],this.stages[t].z[0]=i,s}reset(){for(let t=0;t<this.stages.length;t++)this.stages[t].z=[0,0]}}const Di={point:!1,linear:!1,cubic:!0,sinc:!0},Me={IIR:16,FIR:71},Oi={IIR:Ri,FIR:Ni};function Ce(n,t,e,i=null){i=i||{};let s=(e-t)/t+1,o=new Float64Array(n.length*s);i.method=i.method||"cubic";let r=new zi(n.length,o.length,{method:i.method,tension:i.tension||0,sincFilterSize:i.sincFilterSize||6,sincWindow:i.sincWindow||void 0,clip:i.clip||"mirror"});if(i.LPF===void 0&&(i.LPF=Di[i.method]),i.LPF){i.LPFType=i.LPFType||"IIR";const l=Oi[i.LPFType];if(e>t){let h=new l(i.LPForder||Me[i.LPFType],e,t/2);Hi(n,o,r,h)}else{let h=new l(i.LPForder||Me[i.LPFType],t,e/2);$i(n,o,r,h)}}else nn(n,o,r);return o}function nn(n,t,e){for(let i=0,s=t.length;i<s;i++)t[i]=e.interpolate(i,n)}function Hi(n,t,e,i){for(let s=0,o=t.length;s<o;s++)t[s]=i.filter(e.interpolate(s,n));i.reset();for(let s=t.length-1;s>=0;s--)t[s]=i.filter(t[s])}function $i(n,t,e,i){for(let s=0,o=n.length;s<o;s++)n[s]=i.filter(n[s]);i.reset();for(let s=n.length-1;s>=0;s--)n[s]=i.filter(n[s]);nn(n,t,e)}class Xi extends be{toRIFF(){let t=new Float64Array(ut(this.data.samples.length,this.dataType.bits/8));J(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,t,{container:"RIFF"})}toRIFX(){let t=new Float64Array(ut(this.data.samples.length,this.dataType.bits/8));J(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,t,{container:"RIFX"})}toIMAADPCM(){if(this.fmt.sampleRate!==8e3)throw new Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(this.fmt.numChannels!==1)throw new Error("Only mono files can be compressed as IMA-ADPCM.");{this.assure16Bit_();let t=new Int16Array(ut(this.data.samples.length,2));J(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"4",Kn(t),{container:this.correctContainer_()})}}fromIMAADPCM(t="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",ti(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()}),t!="16"&&this.toBitDepth(t)}toALaw(){this.assure16Bit_();let t=new Int16Array(ut(this.data.samples.length,2));J(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8a",ui(t),{container:this.correctContainer_()})}fromALaw(t="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",ci(this.data.samples),{container:this.correctContainer_()}),t!="16"&&this.toBitDepth(t)}toMuLaw(){this.assure16Bit_();let t=new Int16Array(ut(this.data.samples.length,2));J(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8m",gi(t),{container:this.correctContainer_()})}fromMuLaw(t="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",Ii(this.data.samples),{container:this.correctContainer_()}),t!="16"&&this.toBitDepth(t)}toBitDepth(t,e=!0){let i=t,s=this.bitDepth;e||(t!="32f"&&(i=this.dataType.bits.toString()),s=""+this.dataType.bits),this.assureUncompressed_();let o=this.getSamples(!0),r=new Float64Array(o.length);Gn(o,s,r,i),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,t,r,{container:this.correctContainer_()})}toSampleRate(t,e){this.validateResample_(t);let i=this.getSamples(),s=[];if(i.constructor===Float64Array)s=Ce(i,this.fmt.sampleRate,t,e);else for(let o=0;o<i.length;o++)s.push(Ce(i[o],this.fmt.sampleRate,t,e));this.fromExisting_(this.fmt.numChannels,t,this.bitDepth,s,{container:this.correctContainer_()})}validateResample_(t){if(en(this.fmt.numChannels,this.fmt.bitsPerSample,t)){if(["4","8a","8m"].indexOf(this.bitDepth)>-1)throw new Error("wavefile can't change the sample rate of compressed files.")}else throw new Error("Invalid sample rate.")}assure16Bit_(){this.assureUncompressed_(),this.bitDepth!="16"&&this.toBitDepth("16")}assureUncompressed_(){this.bitDepth=="8a"?this.fromALaw():this.bitDepth=="8m"?this.fromMuLaw():this.bitDepth=="4"&&this.fromIMAADPCM()}correctContainer_(){return this.container=="RF64"?"RIFF":this.container}fromExisting_(t,e,i,s,o){let r=new be;Object.assign(this.fmt,r.fmt),Object.assign(this.fact,r.fact),Object.assign(this.ds64,r.ds64),Object.assign(this.data,r.data),this.newWavFile_(t,e,i,s,o)}}function ut(n,t){let e=n/t;return e%2&&e++,e}class sn extends Xi{constructor(t){super(),t&&this.fromBuffer(t)}fromBase64(t){this.fromBuffer(Zn(t))}toBase64(){return Vn(this.toBuffer())}toDataURI(){return"data:audio/wav;base64,"+this.toBase64()}fromDataURI(t){this.fromBase64(t.replace("data:audio/wav;base64,",""))}}function Wi(n){const t=new sn(new Uint8Array(n)),e=t.fmt;if(e.numChannels!==1)throw new Error("File is not mono");const i=e.sampleRate;t.toBitDepth("32f");const s=t.getSamples(!1,Float32Array);if(!s.length)throw new Error("Wave is empty");const o=t.smpl,r=o.loops[0];if(r&&r.dwType!==0)throw new Error("Unsupported loop type");let l=o.chunkId?o.dwMIDIUnityNote:60,h=o.chunkId?Math.round(o.dwMIDIPitchFraction/4294967296*100):0;return h===100&&(l++,h=0),{samples:s,sampleRate:i,loopStart:r?r.dwStart:-1,loopEnd:r?r.dwEnd+1:-1,rootNote:l,rootFine:h}}function ji(n){const t=new sn;t.fromScratch(1,n.sampleRate,"32f",n.samples),t.toBitDepth("16");const e=t.smpl;return e.chunkId="smpl",e.dwSamplePeriod=Math.floor(1e9/n.sampleRate),e.dwMIDIUnityNote=Math.max(0,Math.min(127,n.rootNote)),e.dwMIDIPitchFraction=Math.floor(n.rootFine/100*4294967296),n.loopStart!==-1&&(e.dwNumSampleLoops=1,e.loops=[{dwName:0,dwType:0,dwStart:Math.floor(n.loopStart),dwEnd:Math.floor(n.loopEnd)-1,dwFraction:0,dwPlayCount:0}]),t.toBuffer()}const Vi=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];function on(n){let t=n+3;return`${Vi[t-Math.floor(t/12)*12]}${Math.floor(t/12)-1}`}const Zi=function(){const n=[];for(let t=127;t>=0;t--)n.push(g("option",{value:t,children:on(t)},t));return n}();function ve(n){return Math.round(n*100)/100}function Le(n,t,e){const i=n.sampleRate*t/(n.loopEnd-n.loopStart),s=Math.log2(i/e)*12+69;let o=Math.floor(s),r=Math.round((s-o)*100);return r===100&&(o++,r=0),{rootNote:o,rootFine:r}}function Gi(n){const[t,e]=R(n.initialWave),[i,s]=R(24),[o,r]=R(0),[l,h]=R(440),[u,_]=R(1),[a,k]=R(!1);function f(M,y){st.tune(l*Math.pow(2,(M.rootNote+M.rootFine/100-69)/12),y/100)}function w(M){const y=M.vol??o;r(y);const B=M.loopCount??u;_(B);const X=M.tuneStd??l;h(X);const at=M.linked??a;k(at);let W=M.wave??t;at&&(W={...W,...Le(W,B,X)}),e(W),f(W,y)}function E(){const{rootNote:M,rootFine:y}=Le(t,u,l);return`${on(M)} +${y} cents`}function v(){f(t,o),st.start(t)}function m(){st.stop()}function c(M){st.stop(),w({wave:M})}function C(){c({...t,loopStart:-1,loopEnd:-1})}function x(){c({...t,loopStart:Math.round(t.loopStart),loopEnd:Math.round(t.loopEnd)})}function A(){if(t.loopStart===-1)return;function M(y){let B=y-.5,X=y+.5;for(let at=0;at<20;at++){const W=(B+X)/2,Wt=K(Q,t.samples,B),hn=K(Q,t.samples,X);if(Math.sign(Wt)===Math.sign(hn))return W;const an=K(Q,t.samples,W);Math.sign(Wt)===Math.sign(an)?B=W:X=W}return(B+X)/2}c({...t,loopStart:M(t.loopStart),loopEnd:M(t.loopEnd)})}function H(){c(it(An(t,i)))}function p(){c(it(et(t)))}function b(){c(it(Un(t)))}function S(){c(it(et(Bn(et(t)))))}function U(){t.loopStart!==-1&&c(it(et(_e(et(t)))))}function G(){const M=Nn(_e(et(t))),y=new Blob([ji(M)],{type:"audio/wav"}),B=document.createElement("a"),X=URL.createObjectURL(y);B.href=X,B.download="sample.wav",B.style.display="none",document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(X)}function j(M){const y=parseInt(M.currentTarget.value);isNaN(y)||s(y)}function F(M){const y=parseInt(M.currentTarget.value);w({wave:{...t,rootNote:y}})}function L(M){const y=parseInt(M.currentTarget.value);if(!isNaN(y)){const B=Math.floor(y/100);w({wave:{...t,rootNote:t.rootNote+B,rootFine:y-B*100}})}}function N(M){const y=parseInt(M.currentTarget.value);!isNaN(y)&&y>=0&&y<=100&&w({vol:y})}function $(M){const y=parseInt(M.currentTarget.value);!isNaN(y)&&y>0&&w({loopCount:y})}function D(M){const y=parseInt(M.currentTarget.value);!isNaN(y)&&y>0&&w({tuneStd:y})}function ln(M){w({linked:M.currentTarget.checked})}let ft="None";return t.loopStart!==-1&&(ft=`${ve(t.loopStart)} - ${ve(t.loopEnd)}`,t.loopEnd-t.loopStart>=1&&(ft=`${ft} (${E()})`)),g(tt,{children:[g("div",{id:"controls",children:[g("div",{children:[g("label",{children:"Play:"}),g("button",{onClick:v,children:"Start"}),g("button",{onClick:m,children:"Stop"})]}),g("div",{children:[g("label",{children:"Loop:"}),g("button",{onClick:C,children:"Clear"}),g("button",{onClick:x,children:"Snap sample"}),g("button",{onClick:A,children:"Snap zero"}),g("button",{onClick:H,children:"Crossfade"}),g("button",{onClick:p,children:"Trim"})]}),g("div",{children:[g("label",{children:"Tools:"}),g("button",{onClick:b,children:"Normalize"}),g("button",{onClick:S,children:"Round tuning"}),g("button",{onClick:U,children:"Align loop"}),g("button",{onClick:G,children:"Save"})]}),g("div",{children:[g("label",{htmlFor:"crossfadeLen",children:"Crossfade length:"}),g("input",{id:"crossfadeLen",type:"number",onChange:j,value:i}),g("label",{htmlFor:"loopCount",children:"Loop cycles:"}),g("input",{id:"loopCount",type:"number",onChange:$,value:u}),g("label",{htmlFor:"tuneStd",children:"Tuning standard:"}),g("input",{id:"tuneStd",type:"number",onChange:D,value:l})]}),g("div",{children:[g("label",{htmlFor:"rootNote",children:"Tune note:"}),g("select",{id:"rootNote",onChange:F,value:t.rootNote,children:Zi}),g("label",{htmlFor:"rootFine",children:"Tune cents:"}),g("input",{id:"rootFine",type:"number",onChange:L,value:t.rootFine}),g("label",{htmlFor:"tuneVol",children:"Tune vol%:"}),g("input",{id:"tuneVol",type:"number",onChange:N,value:o}),g("label",{htmlFor:"linked",children:"Linked:"}),g("input",{id:"linked",type:"checkbox",onChange:ln,checked:a})]}),g("div",{children:[g("label",{children:"Loop:"}),ft]})]}),g(jn,{wave:t,setWave:c,crossfadeLen:i})]})}const rn=document.getElementById("root");We(g("p",{children:"Please load a file"}),rn);async function Yi(n){const t=await n.arrayBuffer();let e;try{e=it(Wi(t))}catch(i){alert(i);return}st.stop(),We(g(Gi,{initialWave:e},e.id),rn)}document.body.addEventListener("dragover",n=>{n.preventDefault()});document.body.addEventListener("drop",n=>{var e,i;n.preventDefault();const t=(i=(e=n.dataTransfer)==null?void 0:e.files)==null?void 0:i[0];t&&Yi(t)});
